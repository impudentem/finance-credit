var twoStepController;twoStepController=function(){function t(t,e,n,r,o,i,a,s,p){this.$http=t,this.$scope=e,this.$rootScope=n,this.$sce=r,this.$location=o,this.$element=i,this.$sceDelegate=a,this.$filter=s,this.$timeout=p,this.calendar={},this.$scope.$watch(function(t){return function(e,n,r){return t.$scope.main.currentStep}}(this),function(t){return function(e,n,r){if(t.$iElement=$(t.$element),2===(e=parseInt(e)))return t.init()}}(this))}return t.prototype.card_hover=function(t,e){return this.$scope.cards_two.card_hover="mouseover"===t.type?e:""},t.prototype.init=function(){var t,e;return this.calendar={},e=new Date,(t=new Date).setFullYear(t.getFullYear()-18),e.setFullYear(e.getFullYear()-90),this.initCal=function(n){return function(){return n.calendar=n.$iElement.find(".ui.calendar").calendar({type:"date",firstDayOfWeek:1,ampm:!1,minDate:e,maxDate:t,initialDate:e,touchReadonly:!1,disableMinute:!0,popupOptions:{position:"top right",lastResort:"top right"},className:{prevIcon:"open icon left",nextIcon:"open icon right"},text:{days:["В","П","В","С","Ч","П","С"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",now:"Сейчас",am:"AM",pm:"PM"},onChange:function(t,e,r){return n.$scope.$storage.strgData.bday=e},formatter:{date:function(t,e){var n,r,o;return t?(n=""+t.getDate(),r=""+(t.getMonth()+1),n=n.length<2?"0"+t.getDate():""+t.getDate(),r=r.length<2?"0"+(t.getMonth()+1):""+(t.getMonth()+1),o=""+t.getFullYear(),n+"."+r+"."+o):""}}}),n.initMask()}}(this),this.$timeout(function(t){return function(){return t.initCal()}}(this))},t.prototype.prevStep=function(){return this.$scope.main.$location.path("/s1"),this.$scope.main.loading=!0},t.prototype.nextStep=function(){var t;if(t=$(this.$element).find(".ui.form"),(t=t.data("module-form"))&&t.is.valid()){if(this.$scope.main.loading=!0,this.$location.path("/s3"),!this.$scope.$$phase)return this.$scope.$apply()}else if(t)return t.validate.form()},t.prototype.initMask=function(){var t,e,n,r;return void 0===this.$scope.$storage.strgData.aggree&&(this.$scope.$storage.strgData.aggree=!0),t=[39,50,63,66,67,68,73,91,92,93,94,95,96,97,98,99],e=function(){var e,r,o;for(o=[],e=0,r=t.length;e<r;e++)n=t[e],o.push({mask:"+38 (0"+n+") ###-##-##",cc:"UA",cd:"Ukraine"});return o}(),$('input[name="phone"]').inputmask({alias:"abstractphone",countrycode:"38",phoneCodes:e,showMaskOnHover:!1,oncomplete:function(t){return function(e){return t.$scope.$storage.strgData.phone=e.target.value}}(this)}),r={mask:"(09|19|29|30|31).(09|10|11|12).9999",greedy:!1,showMaskOnHover:!1,oncomplete:function(t){return function(e){return t.$scope.$storage.strgData.bday=e.target.value}}(this)},$('input[name="bday"]').inputmask(r),r={mask:"U{1,64} (U{1,64})|(U{1,64} U{1,64})",greedy:!1,showMaskOnHover:!1,oncomplete:function(t){return function(e){return t.$scope.$storage.strgData.name=e.target.value}}(this)},$('input[name="fullname"]').inputmask(r),this.$scope.main.loading=!1,$(this.$element).find(".ui.form").form({inline:!0,on:"blur",fields:{fullname:{identifier:"fullname",rules:[{type:"regExp[/^([а-яёієыї\\-\\']+\\s[а-яёієыї\\-\\']+)?(\\s[а-яёієыї\\-\\']+)?$/i]",prompt:"Введены недопустимые символы"},{type:"empty",prompt:"Укажите Имя и Фамилию"}]},bday:{identifier:"bday",rules:[{type:"regExp[/^\\d{2}[\\.]\\d{2}[\\.]\\d{4}$/i]",prompt:"Неправильная дата рождения"}]},phone:{identifier:"phone",rules:[{type:"empty",prompt:"Неправильный номер телефона"}]},aggree:{identifier:"aggree",rules:[{type:"checked",prompt:"Так мы не сможем обработать Ваш запрос"}]}}})},t}();