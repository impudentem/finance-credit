var twoStepController;twoStepController=function(){function t(t,e,a,n,r,i,o,s,p){this.$http=t,this.$scope=e,this.$rootScope=a,this.$sce=n,this.$location=r,this.$element=i,this.$sceDelegate=o,this.$filter=s,this.$timeout=p,this.calendar={},this.$scope.$watch(function(t){return function(e,a,n){return t.$scope.main.currentStep}}(this),function(t){return function(e,a,n){if(t.$iElement=$(t.$element),2===(e=parseInt(e)))return t.init()}}(this))}return t.prototype.card_hover=function(t,e){return this.$scope.cards_two.card_hover="mouseover"===t.type?e:""},t.prototype.formatter=function(t){var e,a,n;return t?(e=""+t.getDate(),a=""+(t.getMonth()+1),e=e.length<2?"0"+t.getDate():""+t.getDate(),a=a.length<2?"0"+(t.getMonth()+1):""+(t.getMonth()+1),n=""+t.getFullYear(),e+"."+a+"."+n):""},t.prototype.init=function(){return this.calendar={},this.minDate=new Date,this.maxDate=new Date,this.maxDate.setFullYear(this.maxDate.getFullYear()-18),this.minDate.setFullYear(this.minDate.getFullYear()-90),this.initCal=function(t){return function(){return t.calendar=t.$iElement.find("button.daterange").daterangepicker({singleDatePicker:!0,locale:{format:"DD.MM.YYYY",separator:" - ",applyLabel:"Ок",cancelLabel:"Отмена",fromLabel:"С",toLabel:"По",customRangeLabel:"Custom",weekLabel:"W",daysOfWeek:["В","П","В","С","Ч","П","С"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],firstDay:1},opens:"left",minDate:t.formatter(t.minDate),maxDate:t.formatter(t.maxDate),startDate:t.$scope.$storage.strgData.bday?moment(t.$scope.$storage.strgData.bday,"DD.MM.YYYY").toDate():t.minDate},function(e,a,n){var r;if(r=$(t.$element).find(".ui.form"),r=r.data("module-form"),t.bday=e.format("DD.MM.YYYY"),t.$scope.$storage.strgData.bday=e.format("DD.MM.YYYY"),t.$scope.$$phase||t.$scope.$apply(),r&&!0!==r.is.valid())return r.validate.form()}),t.calendar_input=t.$iElement.find("input[name='bday']").on("change",function(e){return t.calendar.data("daterangepicker").setStartDate(t.calendar_input.inputmask("isComplete")?moment(e.target.value,"DD.MM.YYYY").toDate():t.minDate)}).inputmask({placeholder:"__.__.____",alias:"dd.mm.yyyy",yearrange:{minyear:t.minDate.getFullYear(),maxyear:t.maxDate.getFullYear()},greedy:!1,showMaskOnHover:!1}),t.$scope.$storage.strgData.bday&&t.calendar_input.val(t.$scope.$storage.strgData.bday),t.initMask()}}(this),this.$timeout(function(t){return function(){return t.initCal()}}(this))},t.prototype.prevStep=function(){return this.$scope.main.$location.path("/s1"),this.$scope.main.loading=!0},t.prototype.nextStep=function(){var t;if(t=$(this.$element).find(".ui.form"),(t=t.data("module-form"))&&t.is.valid()){if(this.$scope.main.loading=!0,this.$location.path("/s3"),!this.$scope.$$phase)return this.$scope.$apply()}else if(t)return t.validate.form()},t.prototype.initMask=function(){var t,e,a;return void 0===this.$scope.$storage.strgData.aggree&&(this.$scope.$storage.strgData.aggree=!0),t=[39,50,63,66,67,68,73,91,92,93,94,95,96,97,98,99],function(){var a,n,r;for(r=[],a=0,n=t.length;a<n;a++)e=t[a],r.push({mask:"+38 (0"+e+") ###-##-##",cc:"UA",cd:"Ukraine"});return r}(),$('input[name="phone"]').inputmask({mask:"+38 \\(099\\) 999-99-99",greedy:!1,showMaskOnHover:!1,oncomplete:function(t){return function(e){return t.$scope.$storage.strgData.phone=e.target.value}}(this),onKeyDown:function(t){return function(e){return t.$scope.$storage.strgData.phone=e.target.value}}(this)}),a={mask:"U{1,64} (U{1,64})|(U{1,64} U{1,64})",greedy:!1,showMaskOnHover:!1,oncomplete:function(t){return function(e){return t.$scope.$storage.strgData.name=e.target.value}}(this)},$('input[name="fullname"]').inputmask(a),this.$scope.main.loading=!1,$(this.$element).find(".ui.form").form({inline:!0,on:"blur",fields:{fullname:{identifier:"fullname",rules:[{type:"regExp[/^([а-яёієыї\\-\\']+\\s[а-яёієыї\\-\\']+)?(\\s[а-яёієыї\\-\\']+)?$/i]",prompt:"Введены недопустимые символы"},{type:"empty",prompt:"Укажите Имя и Фамилию"}]},bday:{identifier:"bday",rules:[{type:"regExp[/^\\d{2}[\\.]\\d{2}[\\.]\\d{4}$/i]",prompt:"Неправильная дата рождения"}]},phone:{identifier:"phone",rules:[{type:"regExp[/^\\+38\\s\\(0\\d{2}\\)\\s\\d{3}\\-\\d{2}\\-\\d{2}$/i]",prompt:"Неправильный номер телефона"},{type:"empty",prompt:"Вы не указали номер телефона"}]},aggree:{identifier:"aggree",rules:[{type:"checked",prompt:"Так мы не сможем обработать Ваш запрос"}]}}})},t}();