var twoStepController;twoStepController=function(){function e(e,t,n,r,i,o,a,s,u){this.$http=e,this.$scope=t,this.$rootScope=n,this.$sce=r,this.$window=i,this.$element=o,this.$sceDelegate=a,this.$filter=s,this.$timeout=u,this.form_data={},this.$scope.$watch(function(e){return function(t,n,r){return e.$scope.main.currentStep}}(this),function(e){return function(t,n,r){return 2===t&&e.init(),!1}}(this))}return e.prototype.card_hover=function(e,t){return this.$scope.cards_two.card_hover="mouseover"===e.type?t:""},e.prototype.init=function(){var e,t;return t=new Date,(e=new Date).setFullYear(e.getFullYear()-18),t.setFullYear(t.getFullYear()-90),this.initCal=function(n){return function(){var r;return(r=$(".ui.calendar")).length?(r.calendar({type:"date",firstDayOfWeek:1,ampm:!1,minDate:t,maxDate:e,disableMinute:!0,className:{prevIcon:"open icon left",nextIcon:"open icon right"},text:{days:["В","П","В","С","Ч","П","С"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Сегодня",now:"Сейчас",am:"AM",pm:"PM"},onChange:function(e,t,r){if(n.$scope.form_two.form_data.bday=t,!n.$scope.$$phase)return n.$scope.$apply()},formatter:{date:function(e,t){return e?e.toLocaleString().split(",")[0]:""}}}),n.$scope.form_two.form_data.calObj=r,window.__calend=r,n.$scope.main.loading=!1,n.initMask()):n.$timeout(function(){return n.initCal()},1e3)}}(this),this.$timeout(function(e){return function(){return e.initCal()}}(this))},e.prototype.initMask=function(){var e;return e={mask:"+38 (\\099) 999-99-99",greedy:!1},$('input[name="phone"]').inputmask(e),this.$window.dispatchEvent(this.$rootScope.settings.events.eventWidgetStep2),$(this.$element).find("form").form({inline:!0,on:"blur",fields:{fullname:{identifier:"fullname",rules:[{type:"regExp[/^[а-яёієыї\\-\\']*\\s[а-яёієыї\\-\\']*\\s[а-яёієыї\\-\\']*$/i]",prompt:"Введены недопустимые символы"}]},fullname:{identifier:"fullname",rules:[{type:"regExp[/^[а-яёієыї\\-\\']*\\s[а-яёієыї\\-\\']*\\s[а-яёієыї\\-\\']*$/i]",prompt:"Введены недопустимые символы"}]},phone:{identifier:"phone",rules:[{type:"empty",prompt:"Неправильный номер телефона"}]},aggree:{identifier:"aggree",rules:[{type:"checked",prompt:"Так мы не сможем обработать Ваш запрос"}]}},onSuccess:function(e){return function(t,n){return e.$scope.main.loading=!0,e.$scope.main.currentStep=3,console.log(t,n),!1}}(this)})},e}();